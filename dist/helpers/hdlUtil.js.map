{"version":3,"sources":["helpers/hdlUtil.js"],"names":["Q","require","_L","CircularJSON","hdlValidateUtil","xConstUtil","datesDesc","en","days","daysShort","daysMin","months","monthsShort","module","exports","drawUrl","str","regUrl","replace","s1","s2","uri","unicode2Chr","st","t","i","length","slice","concat","unescape","chr2Unicode","charCodeAt","toString","toUpperCase","replaceReg","self","qstr","reglist","forEach","r","index","reg","RegExp","join","text","mix","target","source","covered","key","getUrlArgObj","url","url2","indexOf","ret","data","split","oc","LIST_RANDOM_36","LIST_RANDOM_CAPTCHA","random36","len","flag","lists","total","push","Math","floor","random","isNonEmptyArray","arr","Array","oType","o","printError","err","errStr","Error","String","message","JSON","stringify","copyPartialObject","from","to","keys","prototype","call","arguments","elem","trim","notHasfiles","obj","isEmptyObject","setNoCache","res","header","_validateDateStringExpArr","getDatetimeFlag","regExp","match","rtnFlag","test","isDateHhMiSsFffAllZero","date","Date","hh","getHours","mi","getMinutes","ss","getSeconds","fff","getMilliseconds","putOffTomorrow","setDate","getDate","putOffYesterday","parseDatetimeStrByFlag","options","startPlus","endPlus","lastIndexOf","skipValidation","addOneDayIfNoTime","substring","setHours","setMinutes","setSeconds","setMilliseconds","isTimeIntervalValid","reqParam","fields","unit","max","rtn","startField","endField","startDateStr","endDateStr","startDate","endDate","timeGap","Infinity","getTimeGap","validateDateString","m","exp","is_yyyymmdd","parse_yyyymmdd","charAt","parseInt","paddingZero1","dd","paddingZero","diff","convertDate2Num","now","precise","nowStr","date2string","numStr","convertNum2DateStr","allLength","partLength","sgnArr","results","skip","pl","sgn","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDate","getUTCDate","utcHour","getUTCHours","utcMinute","getUTCMinutes","utcSecond","getUTCSeconds","utcMillisecond","getUTCMilliseconds","tmpArr1","tmpArr2","padStart","rtnStr","yyyy","getFullYear","mm","getMonth","ms","iterateObject4Date2string","fieldsObj","Object","iterateObject4certainArray","keyName","resultArr","OUTTER","subElem","id","j","iterateObject4certainObject","validateHandler","iterateObject4certainKeyVals","iterateObject2replaceCertainValue","rawData","converter","clone","deepClone","isReplace","recurHandler","val","k","convertVal","iterateObject2replaceCertainValueByRegex","regex","certainValue","iterateObjectHandler","itrObj","handler","paths","copypaths","iterateObject4DiffHandler","itrObj4Dif","obj1","obj2","customizer","Function","a","b","c","isEqual","otp1","otp2","result","subObj1","subObj2","subpaths","rst","filter","copyA","flattenDeep","isEmpty","utcOffset","offset","isNaN","copiedDate","getTime","minutesOffset","formatISOdate","endIdx","formatISOdate2","map","idx","getBritishDate","formalMonth","monthsArr","getDeepVal","year","monthIdx","day","monthShort","getNewBritishDate","filterNonNumString","nonRegex","getChineseDate","month","getTimeUnitChn","dict","hour","h","y","former","latter","tmpDate","formatSeconds","value","theTime","theTime1","theTime2","parseDateStr","inStr","yy","MM","setYear","setMonth","setTime","D","Minutes","since","setDay","getDaysInOneMonth","d","setCharset","req","utf8Charset","json","jsonp","type","query","send","filterJson","undefined","displayProp","limit","objType","isNotEmptyObject","setInitCap","init","lower","toLowerCase","setEachInitCap","input","rtnArr","strArr","trim2","isBlank","isNotBlank","trimStr","trimArray","convert","removeDuplicateInArray","passportArr","passportObj","pptElem","isBlankStr","isNotBlankStr","getMultiSubString","array","src","start","end","middle","nextSrc","cutStr","L","strlen","chrlen","chr","getAlphabetLength","stringToInt","defaultVal","limitNum","stringToFloat","parseFloat","replaceAll","before","after","joinEscapeCustomizer","ch","escapeChars","arr2","escape4RegExp","esch","splitMultiEscapeCustomizer","arr1","splitEscapeCustomizer","flatten","stage","pushSubArr","ich","escapeCharIdx","i2ch","escapeChar2Idx","hdlEscapeArray","_len","_chr","_preChr","_rtnStrArray","escapeBackSlash","extractImgSrc","_imgStr","regex2","_imgStr2","_imgSrc","getRound","num","round","pow","startsWith","str1","startStr","endsWith","endStr","eval","indexOfChn","startIdx","str2","matchResult","nextChnCharIdx","regexIndexOf","startpos","search","regexLastIndexOf","global","ignoreCase","multiLine","stringToWorkWith","nextStop","exec","lastIndex","fnDeepClone","oidHandler","splice","dateHandler","Buffer","bufferHandler","parseJsonWithNumber2String","regexArr","matches","matchArr","sourceStr","targetStr","tgtStrlen","lastChar","last2Char","parse","e","e1","console","error","getEngCharLength","chineseStrArr","notChineseStrArr","singleStr","isChnChar","ceil","getChnCharLength","stripHtmlTags","getHashCode","hash","splitDollarVarTemplate","template","varObj","shrinks","head","tail","tempArr","subArr","varIdx1","varIdx2","varKey","valVal","s","iterateSplitHtmlTagTemplate","tag","splitHtmlTagTemplate","startTag","startTag2","endTag","nestedTag","firstLeftBracket","parseCookies","cookie","reduce","prev","curr","decodeURIComponent","setDeepVal","keyArr","newValue","keyArr2","lastKey","lastSecondObj","keyArrCopy","getValByIterativeKey","shift","getUrlParams","httpHeadRegExp","RTN","tmp","stepDownIfConditionSatisfiedPromise","conditionHandler","recurInterval","Promise","resolve","rsv","rej","times","maxRetryTimes","overtimeHandler","code","msg","setTimeout","promise","isEndWith","getPlaceOfBirthEng","birthPlace","placeOfBirthEng","placeOfBirthEngObj","cityArr","getPlaceOfIssueEng","issuePlace","placeOfIssueEng","placeOfIssueEngObj","getAirportCHN","airport","airportCHN","hasKeyWords","keyWord","encodeUnicode","decodeUnicode","subtractStrings","arrA","arrB","cursorArr","cursor","offset2","strA","strB"],"mappings":"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","sourcesContent":["/**\n * Created by WangFan on 14/11/10.\n */\n// import Q from 'q';\n// import _L from 'lodash';\n// import CircularJSON from 'circular-json';\n// import hdlValidateUtil from './hdlValidateUtil';\n\nconst Q = require('q');\nconst _L = require('lodash');\nconst CircularJSON = require('circular-json');\nconst hdlValidateUtil = require('./hdlValidateUtil');\n\nconst xConstUtil = {\n    datesDesc: {\n        en: {\n            days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n            daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n            daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n            months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n            monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n        }\n    }\n};\n\nmodule.exports.drawUrl = function (str) {\n    var regUrl = /(htt(p|ps):\\/\\/[A-Za-z.\\d/?&;\\\\=\\\\-\\\\#_(\\u4e00-\\u9fa5)]+)/gi;\n    return str.replace(regUrl, function (s1, s2) {\n        var uri = s2;\n        return '<a href=\"' + uri + '\" target=\"_blank\">' + uri + '</a>';\n    });\n};\n\nmodule.exports.unicode2Chr = function(str) {\n    if ('' !== str) {\n        var st, t, i;\n        st = '';\n        for (i = 1; i <= str.length / 4; i++) {\n            t = str.slice(4 * i - 4, 4 * i - 2);\n            t = str.slice(4 * i - 2, 4 * i).concat(t);\n            st = st.concat('%u').concat(t);\n        }\n        st = unescape(st);\n        return (st);\n    }\n    else return ('');\n};\n\n//unicode\nmodule.exports.chr2Unicode = function(str) {\n    if ('' !== str) {\n        var st, t, i;\n        st = '';\n        for (i = 1; i <= str.length; i++) {\n            t = str.charCodeAt(i - 1).toString(16);\n            if (t.length < 4) {\n                while (t.length < 4) {\n                    t = '0'.concat(t);\n                }\n            }\n            t = t.slice(2, 4).concat(t.slice(0, 2));\n            st = st.concat(t);\n        }\n        return (st.toUpperCase());\n    }\n    else {\n        return ('');\n    }\n};\n\nmodule.exports.replaceReg = function(str) {\n    var self = this;\n    var qstr = this.chr2Unicode(str);\n    var reglist = ['.', '$', '^', '{', '[', '(', '|', ')', '*', '+', '?', '\\\\', '}', ']'];\n    reglist.forEach(function(r, index) {\n        reglist[index] = self.chr2Unicode(r);\n    });\n    var reg = new RegExp(reglist.join('|'), 'g');\n    qstr = qstr.replace(reg, function(text) {\n        return '5C00' + text;\n    });\n    return this.unicode2Chr(qstr);\n};\n\nmodule.exports.mix = function(target, source, covered) {\n    var key;\n    for (key in source) {\n        if (!covered || ! (key in target)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n};\n\nmodule.exports.getUrlArgObj = function(url) {\n    let url2 = '';\n    if(url.indexOf('?') > -1){\n        url2 = url.slice(url.indexOf('?') + 1);\n    }else{\n        url2 = url;\n    }\n    const ret = {};\n    const data = url2.split('&') || [];\n    for (var i = 0; i < data.length; i++) {\n        var oc = data[i].split('=');\n        ret[oc[0]] = oc[1];\n    }\n    return ret;\n};\n\nvar LIST_RANDOM_36 = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']\nvar LIST_RANDOM_CAPTCHA = ['2', '3', '4', '5', '6', '7', '8', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'R', 'S', 'T', 'W', 'X', 'Y', 'Z'];\n\nmodule.exports.random36 = function(len, flag) {\n    var lists = null;\n    var ret = [], total;\n    if(flag==='onlyDigit'){\n        lists = LIST_RANDOM_36;\n        total = 10;\n    }else{\n        if(flag==='captcha'){\n            lists = LIST_RANDOM_CAPTCHA;\n        }else{\n            lists = LIST_RANDOM_36;\n        }\n        total = lists.length;\n    }\n    for (var i = 0; i < len; i++) {\n        ret.push(lists[Math.floor(Math.random() * total)]);\n    }\n    return ret.join('');\n};\n\n/**  */\nconst isNonEmptyArray = arr => {\n    if(!arr){\n        return false;\n    }\n    if( !(arr instanceof Array) ){\n        return false;\n    }\n    return arr.length > 0;\n}\nmodule.exports.isNonEmptyArray = isNonEmptyArray;\n\n/** o\n \t\n Undefined\t\"undefined\"\n Null\t\"null\" ( typeof  \"object\")\n \t\"boolean\"\n \t\"number\"\n \t\"string\"\n Symbol (ECMAScript 6 )\t\"symbol\"\n (JS)\tImplementation-dependent\n  (implements [[Call]] in ECMA-262 terms)\t\"function\"\n \t\"object\"\n * */\nvar oType = function (o) {\n    return (o === null) ? \"null\" : typeof(o);\n};\nmodule.exports.oType = oType;\n\n/**  */\nconst printError = function(err){\n    var errStr = '';\n    if(err instanceof Error){\n        errStr = String(err);\n        if(!errStr){\n            errStr = err.message;\n        }\n    }else if(oType(err)==='object'){\n        errStr = JSON.stringify(err);\n    }else{\n        errStr = err;\n    }\n    if(!errStr || errStr === 'null' || errStr === 'Error: null'){\n        return null;\n    }\n    return errStr;\n}\nmodule.exports.printError = printError;\n\nmodule.exports.copyPartialObject = function(from, to){\n    var keys = Array.prototype.slice.call(arguments, 2);\n    if(!keys){\n        return false;\n    }\n    var i= 0, len=keys.length, key, elem;\n    if(!len){\n        return false;\n    }\n    for(; i<len; i++){\n        key = keys[i];\n        elem = trim(from[key]);\n        if(elem === ''){\n            continue;\n        }\n        to[key] = elem;\n    }\n    return true;\n};\n\nmodule.exports.notHasfiles = function(obj) {\n    if (this.isEmptyObject(obj)) return true;\n    for (var i in obj) {\n        if (obj[i]['size'] === 0) return true;\n    }\n    return false;\n};\n\nmodule.exports.setNoCache = function(res) {\n    res.header('expires', 'Sun, 1 Jan 2006 01:00:00 GMT');\n    res.header('cache-control', 'no-cache,must-revalidate,private,no-store');\n    res.header('pragma', 'no-cache');\n};\n\n/**  */\nconst _validateDateStringExpArr = [\n    /^\\d{4}[/-](0?[1-9]|1[012])[/-](0?[1-9]|[12][0-9]|3[01])$/ // format: yyyy-mm-dd //  /^(0?[1-9]|[12][0-9]|3[01])[\\/\\-](0?[1-9]|1[012])[\\/\\-]\\d{4}$/; // format: dd/mm/yyyy\n    , /^\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}$/ // format: yyyy-mm-dd hh:mi\n    , /^((\\d{2}(([02468][048])|([13579][26]))[-/\\s]?((((0?[13578])|(1[02]))[-/\\s]?((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))[-/\\s]?((0?[1-9])|([1-2][0-9])|(30)))|(0?2[-/\\s]?((0?[1-9])|([1-2][0-9])))))|(\\d{2}(([02468][1235679])|([13579][01345789]))[-/\\s]?((((0?[13578])|(1[02]))[-/\\s]?((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))[-/\\s]?((0?[1-9])|([1-2][0-9])|(30)))|(0?2[-/\\s]?((0?[1-9])|(1[0-9])|(2[0-8]))))))(\\s((([0-1][0-9])|(2?[0-3])):([0-5]?[0-9])((\\s)|(:([0-5]?[0-9])))))?$/  // format: yyyy-mm-dd hh:mi:ss\n    , /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/ // format: yyyy-mm-ddThh:mi:ss.fffZ\n    , /^\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:\\d{2}\\.\\d{3}$/ // format: yyyy-mm-dd hh:mi:ss.fff\n];\n\nvar getDatetimeFlag = function(str){\n    var i, len, regExp, match, rtnFlag = '';\n    for(i=0, len=_validateDateStringExpArr.length; i<len; i++){\n        regExp = _validateDateStringExpArr[i];\n        match = regExp.test(str);\n        if(match){\n            break;\n        }\n    }\n    switch(i){\n        case 0: rtnFlag = 'yyyy-mm-dd'; break;\n        case 1: rtnFlag = 'yyyy-mm-dd hh:mi'; break;\n        case 2: rtnFlag = 'yyyy-mm-dd hh:mi:ss'; break;\n        case 3: rtnFlag = 'yyyy-mm-ddThh:mi:ss.fffZ'; break;\n        case 4: rtnFlag = 'yyyy-mm-dd hh:mi:ss.fff'; break;\n    }\n    return rtnFlag;\n};\nmodule.exports.getDatetimeFlag = getDatetimeFlag;\n\n/**    */\nconst isDateHhMiSsFffAllZero = date => {\n    if(!(date instanceof Date)){\n        return false;\n    }\n    const hh = date.getHours();\n    const mi = date.getMinutes();\n    const ss = date.getSeconds();\n    const fff = date.getMilliseconds();\n    return hh === 0 && mi === 0 && ss === 0 && fff === 0;\n};\nmodule.exports.isDateHhMiSsFffAllZero = isDateHhMiSsFffAllZero;\n\nconst putOffTomorrow = date => {\n    if(!(date instanceof Date)){\n        return null;\n    }\n    date.setDate(date.getDate() + 1);\n    return date;\n}\nmodule.exports.putOffTomorrow = putOffTomorrow;\n\nconst putOffYesterday = date => {\n    if(!(date instanceof Date)){\n        return null;\n    }\n    date.setDate(date.getDate() - 1);\n    return date;\n}\nmodule.exports.putOffYesterday = putOffYesterday;\n/** \n * flag can be omitted\n * options.addOneDayIfNoTime // Y\n */\nconst parseDatetimeStrByFlag = function(str, options={}){\n    if(oType(options) === 'string'){ //  @ 2020-05-25 16:20:23\n        options = {flag: options};\n    }\n    let flag = _L.trim(options.flag);\n    if(!str){\n        return null;\n    }else if(str instanceof Date){\n        return str;\n    }\n    if(oType(str) !== 'string'){\n        return null;\n    }\n    //  +  START\n    const startPlus = str.indexOf('+');\n    const endPlus = str.lastIndexOf('+');\n    if(startPlus > -1 && startPlus === endPlus){\n        str = str.replace('+', ' ');\n    }\n    //  +  END\n    var regExp, match, date, skipValidation = false;\n    if(!flag){\n        skipValidation = true;\n        flag = getDatetimeFlag(str);\n    }\n    const addOneDayIfNoTime = _L.trim(options.addOneDayIfNoTime);\n    switch(flag){\n        // equivalent to function: parse_yyyymmdd(str)\n        case 'yyyy-mm-dd': regExp = _validateDateStringExpArr[0]; break;\n        case 'yyyy-mm-dd hh:mi': regExp = _validateDateStringExpArr[1]; break;\n        case 'yyyy-mm-dd hh:mi:ss': regExp = _validateDateStringExpArr[2]; break;\n        case 'yyyy-mm-ddThh:mi:ss.fffZ': regExp = _validateDateStringExpArr[3]; break;\n        case 'yyyy-mm-dd hh:mi:ss.fff': regExp = _validateDateStringExpArr[4]; break;\n    }\n    if(regExp){\n        if(skipValidation){\n            date = new Date(str);\n        }else{\n            match = regExp.test(str);\n            if(match){\n                date = new Date(str);\n            }else if(flag){\n                str = str.substring(0, flag.length);\n                match = regExp.test(str);\n                if(match){\n                    date = new Date(str);\n                }\n            }\n        }\n        if( !(date instanceof Date) ){\n            return null;\n        }\n        switch(flag){\n            // equivalent to function: parse_yyyymmdd(str)\n            case 'yyyy-mm-dd': date.setHours(0); date.setMinutes(0, 0, 0); break;\n            case 'yyyy-mm-dd hh:mi': date.setSeconds(0, 0); break;\n            case 'yyyy-mm-dd hh:mi:ss': date.setMilliseconds(0); break;\n        }\n        if(flag === 'yyyy-mm-dd' && addOneDayIfNoTime === 'Y'){\n            date.setDate(date.getDate() + 1);\n        }\n        return date;\n    }\n    return null;\n};\nmodule.exports.parseDatetimeStrByFlag = parseDatetimeStrByFlag;\n\n/** max 7~12 184 */\nconst isTimeIntervalValid = ({reqParam, fields = [], unit = 'day', max = 184}) => {\n    const rtn = {};\n    const startField = fields[0];\n    const endField = fields[1];\n    if(!startField){\n        return rtn;\n    }\n    if(oType(max) !== 'number'){\n        return rtn;\n    }\n    const startDateStr = reqParam[startField];\n    const endDateStr = endField ? reqParam[endField] : '';\n    const startDate = startDateStr ? parseDatetimeStrByFlag(startDateStr) : null;\n    const endDate = endDateStr ? parseDatetimeStrByFlag(endDateStr) : new Date();\n    if(!startDate){\n        rtn.max = max;\n        rtn.timeGap = Infinity;\n        rtn.unit = unit;\n    }else{\n        const timeGap = getTimeGap(startDate, endDate, unit);\n        if(timeGap > max){\n            rtn.max = max;\n            rtn.timeGap = timeGap;\n            rtn.unit = unit;\n        }\n    }\n    return rtn;\n}\nmodule.exports.isTimeIntervalValid = isTimeIntervalValid;\n\nvar validateDateString = function (str) {\n    if(!str){\n        return null;\n    }\n    var m, i, len, exp;\n    for(i=0, len=_validateDateStringExpArr.length; i<len; i++){\n        exp = _validateDateStringExpArr[i];\n        m = str.match(exp);\n        if(m){\n            return m;\n        }\n    }\n    return null;\n};\nmodule.exports.validateDateString = validateDateString;\n\n/**  */\nvar is_yyyymmdd = function(str){\n    if(!str){\n        return null;\n    }\n    var m, exp;\n    exp = _validateDateStringExpArr[0];\n    m = str.match(exp);\n    return m;\n};\nmodule.exports.is_yyyymmdd = is_yyyymmdd;\n\n/**  */\nvar parse_yyyymmdd = function(str){\n    if(oType(str) !== 'string'){\n        return str;\n    }\n    if(!str || str==''){\n        return null;\n    }\n    var m, exp, date;\n    exp = _validateDateStringExpArr[0];\n    m = str.match(exp);\n    if(!m){\n        return null;\n    }\n    m[0] = m[0].substring(0, 4);\n    if(m[1].charAt(0)=='0'){\n        m[1] = m[1].charAt(1);\n    }\n    m[1] = parseInt(m[1]);\n    m[1] -= 1;\n    date = new Date(m[0], m[1], m[2], 0, 0, 0);\n    return date;\n};\nmodule.exports.parse_yyyymmdd = parse_yyyymmdd;\n\nvar paddingZero1 = function(dd){\n    if(oType(dd)==='number'){\n        dd = String(dd);\n    }else if(oType(dd)!=='string'){\n        return;\n    }\n    if(dd.length<1){\n        return dd;\n    }else if(dd.length>2){\n        return dd.substring(0, 2);\n    }\n    return (dd[1]?dd:\"0\"+dd[0]);\n};\nmodule.exports.paddingZero1 = paddingZero1;\n\nvar paddingZero = function(dd, length){\n    if(oType(dd)==='number'){\n        dd = String(dd);\n    }else if(oType(dd)!=='string'){\n        return;\n    }\n    if(!length){\n        length = 2;\n    }\n    var diff = length - dd.length;\n    while(diff > 0){\n        diff--;\n        dd = '0' + dd;\n    }\n    return dd;\n};\nmodule.exports.paddingZero = paddingZero;\n\nfunction convertDate2Num(now, precise = ''){\n    if(!now){\n        now = new Date();\n    }\n    if(['ss', 'ms'].indexOf(precise) < 0){\n        precise = 'ss';\n    }\n    const nowStr = date2string(now, precise);\n    const numStr = nowStr.replace(/-|\\s|:|\\./g, '');\n    return numStr;\n}\nmodule.exports.convertDate2Num = convertDate2Num;\n\nfunction convertNum2DateStr(str){\n    const allLength = 14;\n    if(str.length < allLength){\n        return ''; // \n    }\n    const partLength = [4, 2, 2, 2, 2, 2];\n    const sgnArr = ['-', '-', ' ', ':', ':'];\n    const results = [];\n    for(let i = 0, skip = 0; i < partLength.length; i++){\n        const pl = partLength[i];\n        const sgn = (i < sgnArr.length) ? sgnArr[i] : '';\n        results.push(str.slice(skip, pl + skip));\n        results.push(sgn);\n        skip += pl;\n    }\n    if(str.length - allLength === 3){\n        results.push('.');\n        results.push(str.slice(-3));\n    }\n    return results.join('');\n}\nmodule.exports.convertNum2DateStr = convertNum2DateStr;\n\n/** get format of Date as 'yyyy-mm-dd[ hh:mi:ss]' in String */\nvar date2string = function(date, precise) {\n    if(!date || !(date instanceof Date)){\n        return date;\n    }\n    if(precise === 'GMT'){\n        /* const dateCopy = new Date(date.getTime());\n        dateCopy.setMinutes(dateCopy.getMinutes() + dateCopy.getTimezoneOffset()) */\n        const utcYear = date.getUTCFullYear();\n        const utcMonth = date.getUTCMonth() + 1;\n        const utcDate = date.getUTCDate();\n        const utcHour = date.getUTCHours();\n        const utcMinute = date.getUTCMinutes();\n        const utcSecond = date.getUTCSeconds();\n        const utcMillisecond = date.getUTCMilliseconds();\n        const tmpArr1 = [];\n        const tmpArr2 = [];\n        tmpArr1.push(utcYear);\n        tmpArr1.push(_L.padStart(utcMonth, 2, '0'));\n        tmpArr1.push(_L.padStart(utcDate, 2, '0'));\n        tmpArr2.push(_L.padStart(utcHour, 2, '0'));\n        tmpArr2.push(_L.padStart(utcMinute, 2, '0'));\n        tmpArr2.push(_L.padStart(utcSecond, 2, '0'));\n        const rtnStr = tmpArr1.join('-') + 'T' + tmpArr2.join(':') + '.' + _L.padStart(utcMillisecond, 3, '0') + 'Z';\n        return rtnStr;\n    }\n    var yyyy = date.getFullYear().toString()\n        , mm = (date.getMonth()+1).toString() // getMonth() is zero-based\n        , dd  = date.getDate().toString();\n    var ms = date.getMilliseconds().toString();\n    var rtn = yyyy + '-' + (mm[1]?mm:\"0\"+mm[0]) + '-' + (dd[1]?dd:\"0\"+dd[0]); // padding\n    if(!precise){\n        return rtn;\n    }\n    var hh = date.getHours().toString()\n        , mi = date.getMinutes().toString()\n        , ss = date.getSeconds().toString();\n    if(precise==='mi'){ //\n        rtn += ' '+ (hh[1]?hh:\"0\"+hh[0])+':'+(mi[1]?mi:\"0\"+mi[0]);\n        return rtn;\n    }else if(precise==='ss'){ //\n        rtn += ' '+ (hh[1]?hh:\"0\"+hh[0])+':'+(mi[1]?mi:\"0\"+mi[0])+':'+(ss[1]?ss:\"0\"+ss[0]);\n        return rtn;\n    }else if(precise === 'ms'){\n        rtn += ' '+ (hh[1]?hh:\"0\"+hh[0])+':'+(mi[1]?mi:\"0\"+mi[0])+':'+(ss[1]?ss:\"0\"+ss[0]) + '.' + paddingZero(ms, 3);\n    }\n    return rtn;\n};\nmodule.exports.date2string = date2string;\n\n/** @param precise: 'hh' or 'mi' or 'ss' or 'ms'\n * fieldsObj \n * */\nvar iterateObject4Date2string = function(obj, precise, fieldsObj){\n    if(oType(obj)!=='object'){\n        return;\n    }\n    Object.keys(obj).forEach(function(key){\n        var elem = obj[key];\n        if(elem instanceof Date){\n            if(!isEmptyObject(fieldsObj) && !fieldsObj[key]){\n                return;\n            }\n            /*   _utcOffset ?\n            if(endsWith(key, '_utcOffset')){\n                return;\n            } */\n            obj[key] = date2string(elem, precise);\n        }else if(oType(elem)==='object'){\n            iterateObject4Date2string(elem, precise, fieldsObj);\n        }\n    });\n};\nmodule.exports.iterateObject4Date2string = iterateObject4Date2string;\n\nvar iterateObject4certainArray = function(obj, keyName, resultArr){\n    if(oType(obj)!=='object'){\n        return;\n    }\n    Object.keys(obj).forEach(function(key){\n        var elem = obj[key];\n        if(elem instanceof Array && key === keyName){\n            OUTTER: for(let i=0; i<elem.length; i++){\n                const subElem = elem[i];\n                if(oType(subElem) === 'object' && subElem.id){\n                    for(let j=0; j<resultArr.length; j++){\n                        if(resultArr[j] && resultArr[j].id && resultArr[j].id === subElem.id){\n                            continue OUTTER;\n                        }\n                    }\n                }else if(oType(subElem) === 'string' || oType(subElem) === 'number'){\n                    if(resultArr.indexOf(subElem) > -1){\n                        continue OUTTER;\n                    }\n                }\n                resultArr.push(subElem);\n            }\n        }else if(oType(elem)==='object'){\n            iterateObject4certainArray(elem, keyName, resultArr);\n        }\n    });\n};\nmodule.exports.iterateObject4certainArray = iterateObject4certainArray;\n\nvar iterateObject4certainObject = function(obj, validateHandler, resultArr){\n    if(oType(obj)!=='object'){\n        return;\n    }\n    Object.keys(obj).forEach(function(key){\n        var elem = obj[key];\n        if(oType(elem) === 'object' && !(elem instanceof Array) && validateHandler(key, elem)){\n            resultArr.push(elem);\n        }else if(oType(elem)==='object'){\n            iterateObject4certainObject(elem, validateHandler, resultArr);\n        }\n    });\n};\nmodule.exports.iterateObject4certainObject = iterateObject4certainObject;\n\nconst iterateObject4certainKeyVals = function({obj, keys, resultArr}){\n    if(oType(obj)!=='object'){\n        return;\n    }\n    Object.keys(obj).forEach(function(key){\n        if(keys.indexOf(key) > -1 && oType(obj[key]) === 'string'){\n            if(resultArr.indexOf(obj[key]) < 0){\n                resultArr.push(obj[key]);\n            }\n        }else if(oType(obj[key]) === 'object'){\n            iterateObject4certainKeyVals({obj: obj[key], keys, resultArr});\n        }\n    });\n};\nmodule.exports.iterateObject4certainKeyVals = iterateObject4certainKeyVals;\n\n\n/** @param converter e.g. {'http://www.baidu.com': 'https://www.google.com'}\n * if options.isReplace === 'Y', recur rawData all over and replace the key of converter with its corresponding value\n * */\nconst iterateObject2replaceCertainValue = (rawData, converter, options) => {\n    if(isEmptyObject(converter)){\n        return rawData;\n    }\n    if(!options){\n        options = {};\n    }\n    let data = null;\n    if(options.clone === 'Y'){\n        data = deepClone(rawData);\n    }else{\n        data = rawData;\n    }\n    const isReplace = _L.trim(options.isReplace);\n    const recurHandler = function(elem, converter){\n        if(oType(elem) !== 'object'){\n            return;\n        }\n        var keys = Object.keys(elem);\n        for(var i=0; i<keys.length; i++){\n            var key = keys[i];\n            var val = elem[key];\n            if(oType(val) !== 'object'){\n                if(isReplace === 'Y' && oType(val) === 'string'){\n                    Object.keys(converter).forEach(k => {\n                        elem[key] = val.replace(k, converter[k]);\n                    })\n                }else{\n                    var convertVal = converter[val];\n                    if(convertVal && oType(val) === oType(convertVal)){\n                        elem[key] = convertVal;\n                    }\n                }\n            }else{\n                recurHandler(val, converter)\n            }\n        }\n    }\n    recurHandler(data, converter);\n    return data;\n}\nmodule.exports.iterateObject2replaceCertainValue = iterateObject2replaceCertainValue;\n\n/**  */\nconst iterateObject2replaceCertainValueByRegex = (rawData, regex, certainValue, options) => {\n    if(!certainValue){\n        return rawData;\n    }\n    if(oType(regex) !== 'object'){\n        return rawData;\n    }\n    if(!options){\n        options = {};\n    }\n    let data = null;\n    if(options.clone === 'Y'){\n        data = deepClone(rawData);\n    }else{\n        data = rawData;\n    }\n    var recurHandler = function (elem, regex, certainValue) {\n        if (oType(elem) !== 'object') {\n            return;\n        }\n        var keys = Object.keys(elem);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var val = elem[key];\n            if (oType(val) === 'string') {\n                elem[key] = val.replace(regex, certainValue);\n            } else if (oType(val) === 'object') {\n                recurHandler(val,regex, certainValue)\n            }\n        }\n    }\n    recurHandler(data, regex, certainValue);\n    return data;\n}\nmodule.exports.iterateObject2replaceCertainValueByRegex = iterateObject2replaceCertainValueByRegex;\n\n/** \n * \n * iterateObjectHandler(obj, handler) \n * */\nconst iterateObjectHandler = function itrObj(obj, handler, paths=[]){\n    if(oType(handler) !== 'function'){\n        return;\n    }\n    if(['object'].indexOf(oType(obj)) < 0 || obj instanceof Date){\n        return handler(obj, paths);\n    }\n    const keys = Object.keys(obj);\n    for(let key of keys){\n        const copypaths = deepClone(paths);\n        copypaths.push(key);\n        obj[key] = itrObj(obj[key], handler, copypaths);\n    }\n    return obj;\n}\nmodule.exports.iterateObjectHandler = iterateObjectHandler\n\n/**  */\nconst iterateObject4DiffHandler = function itrObj4Dif(obj1, obj2, customizer, paths=[]){\n    if(!customizer || !(customizer instanceof Function)){\n        customizer = function(a, b, c){\n            if(_L.isEqual(a, b)){\n                return null;\n            }\n            return c;\n        }\n    }\n    const otp1 = oType(obj1);\n    const otp2 = oType(obj2);\n    if(otp1 !== otp2 || otp1 !== 'object'){\n        return customizer(obj1, obj2, paths);\n    }\n    // must: otp1 === otp2 === 'object'\n    let result = [];\n    for (let key in obj1){\n        const subObj1 = obj1[key];\n        const subObj2 = obj2[key];\n        const subpaths = deepClone(paths);\n        subpaths.push(key);\n        const rst = itrObj4Dif(subObj1, subObj2, customizer, subpaths);\n        result.push(rst);\n    }\n    return result.filter(a => {\n        const copyA = _L.flattenDeep(deepClone(a));\n        return !_L.isEmpty(copyA);\n    });\n}\nmodule.exports.iterateObject4DiffHandler = iterateObject4DiffHandler;\n\n/**\n *  mongodb  UTC \n *  UTC \n * */\nmodule.exports.utcOffset = function(date, offset){\n    if(!date || !(date instanceof Date) || isNaN(offset)){\n        return date;\n    }\n    var copiedDate = new Date(date.getTime());\n    copiedDate.setHours(copiedDate.getHours()+offset);\n    return copiedDate;\n};\n\n/**\n *  mongodb  UTC \n *  UTC \n * */\nmodule.exports.minutesOffset = function(date, offset){\n    if(!date || !(date instanceof Date) || isNaN(offset)){\n        return date;\n    }\n    var copiedDate = new Date(date.getTime());\n    copiedDate.setMinutes(copiedDate.getMinutes()+offset);\n    return copiedDate;\n};\n\n/**\n * yyyy-mm-ddThh:mi:ss\n * 01234567890123456789\n * */\nfunction formatISOdate(str, precise){\n    if(/^\\d{8}$/.test(str)){\n        return str.substring(0, 4) + '-' + str.substring(4, 6) + '-' + str.substring(6, 8);\n    }\n    if(!str || !str.length || str.length<10){\n        return '';\n    }\n    var endIdx = 10;\n    if(precise === 'mi'){\n        endIdx = 16\n    }else if(precise === 'ss'){\n        endIdx = 19;\n    }\n    str = str.replace('T', ' ');\n    str = str.substring(0, endIdx);\n    return str;\n}\nmodule.exports.formatISOdate = formatISOdate;\n\n/** 2020-4-7  2020-04-07 */\nmodule.exports.formatISOdate2 = (str) => {\n    return str.split('-').map((a, idx) => {\n        if([1, 2].indexOf(idx) > -1){\n            if(a.length < 2){\n                return _L.padStart(a, 2, '0');\n            }\n        }\n        return a;\n    }).join('-');\n\n}\n\nmodule.exports.getBritishDate = function(dd, options){\n    if(!options){\n        options = {};\n    }\n    var formalMonth = options.formalMonth;\n    var monthsArr = null;\n    if(formalMonth){\n        monthsArr = getDeepVal(xConstUtil, 'datesDesc.en.monthsShort');\n    }else{\n        monthsArr = getDeepVal(xConstUtil, 'datesDesc.en.months');\n    }\n    if(!monthsArr){\n        return '';\n    }\n    var date = parseDatetimeStrByFlag(dd);\n    if(!date){\n        return '';\n    }\n    var year = date.getFullYear();\n    var monthIdx = date.getMonth();\n    var day = date.getDate();\n    var monthShort = monthsArr[monthIdx];\n    return monthShort + ' ' + day + ', ' + year;\n};\n\nmodule.exports.getNewBritishDate = function(dd, options){\n    if(!options){\n        options = {};\n    }\n    var formalMonth = options.formalMonth;\n    var monthsArr = null;\n    if(formalMonth){\n        monthsArr = getDeepVal(xConstUtil, 'datesDesc.en.monthsShort');\n    }else{\n        monthsArr = getDeepVal(xConstUtil, 'datesDesc.en.months');\n    }\n    if(!monthsArr){\n        return '';\n    }\n    var date = parseDatetimeStrByFlag(dd);\n    if(!date){\n        return '';\n    }\n    var year = _L.trim(date.getFullYear())/* .slice(2) annotated @ 2019-12-02 18:29:26 */;\n    var monthIdx = date.getMonth();\n    var day = date.getDate();\n    var monthShort = (monthsArr[monthIdx] || ' ').slice(0, 3);\n    return day + '-' +monthShort + '-' + year;\n};\n\n/**  */\nmodule.exports.filterNonNumString = function(str){\n    const nonRegex = new RegExp('[^\\\\d]', 'g'); // \n    return str.replace(nonRegex, '');\n}\n\nmodule.exports.getChineseDate = function(dd){\n    var date = parseDatetimeStrByFlag(dd);\n    if(!date){\n        return '';\n    }\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    return year + '' + month + '' + day + ''\n};\n\n/**  */\nconst getTimeUnitChn = str => {\n    const dict = {\n        ms: ''\n        , ss: ''\n        , mi: ''\n        , hour: ''\n        , h: ''\n        , day: ''\n        , year: ''\n        , y: ''\n    }\n    return dict[str] || str;\n}\nmodule.exports.getTimeUnitChn = getTimeUnitChn;\n\n/** get days number between two dates */\nfunction getTimeGap(former, latter, flag) {\n    let tmpDate = null;\n    if(oType(former) === 'string'){\n        tmpDate = parseDatetimeStrByFlag(former);\n        if(tmpDate){\n            former = tmpDate;\n        }\n    }\n    if(oType(latter) === 'string'){\n        tmpDate = parseDatetimeStrByFlag(latter);\n        if(tmpDate){\n            latter = tmpDate;\n        }\n    }\n    if(former instanceof Date){\n        former = former.getTime();\n    }else{\n        return 0;\n    }\n    if(latter instanceof Date){\n        latter = latter.getTime();\n    }else{\n        return 0;\n    }\n    if(flag==='ms'){\n        return (latter-former);\n    }\n    if(flag==='ss'){\n        return (latter-former)/1000;\n    }\n    if(flag==='mi'){\n        return (latter-former)/60000; // 1000*60\n    }\n    if(flag==='hour' || flag === 'h'){\n        return (latter-former)/3600000; // 1000*60*60 = 3600000\n    }\n    if(flag==='day'){\n        return (latter-former)/86400000; // 1000*60*60*24 = 86400000\n    }\n    if(flag==='year' || flag === 'y'){\n        return (latter-former)/31557600000; // 1000*60*60*24*365.25 = 31557600000\n    }\n    return (latter-former)/86400000; // 1000*60*60*24 = 86400000 // \n}\nmodule.exports.getTimeGap = getTimeGap;\n\n/**  */\nmodule.exports.formatSeconds = function(value){\n    var theTime = parseInt(value);// \n    var theTime1 = 0;// \n    var theTime2 = 0;// \n    if(theTime > 60) {\n        theTime1 = parseInt(theTime/60);\n        theTime = parseInt(theTime%60);\n        if(theTime1 > 60) {\n            theTime2 = parseInt(theTime1/60);\n            theTime1 = parseInt(theTime1%60);\n        }\n    }\n    var result = \"\"+parseInt(theTime)+\"\";\n    if(theTime1 > 0) {\n        result = \"\"+parseInt(theTime1)+\"\"+result;\n    }\n    if(theTime2 > 0) {\n        result = \"\"+parseInt(theTime2)+\"\"+result;\n    }\n    return result;\n}\n\n// 012345678901234567890123\n// 2014-10-22T14:40:42.341Z\n/** get Date by parsing String */\nmodule.exports.parseDateStr = function(inStr) {\n    var len;\n    if (!inStr || inStr.length < 10) {\n        return inStr;\n    }\n    len = inStr.length;\n    var yy = parseInt(inStr.substring(0, 4));\n    var MM = parseInt(inStr.substring(5, 7));\n    MM -= 1;\n    var dd = parseInt(inStr.substring(8, 10));\n    var hh, mi, ss, mm;\n    hh = mi = ss = mm = 0;\n    if(len>12){\n        hh = parseInt(inStr.substring(11, 13));\n        if(len>15){\n            mi = parseInt(inStr.substring(14, 16));\n            if(len>18){\n                ss = parseInt(inStr.substring(17, 19));\n                if(len>22) {\n                    mm = parseInt(inStr.substring(20, 23));\n                }\n            }\n        }\n    }\n    if(isNaN(yy)||isNaN(MM)||isNaN(dd)||isNaN(hh)||isNaN(mi)||isNaN(ss)||isNaN(mm)){\n        return null;\n    }\n    var rtn = new Date();\n    rtn.setYear(yy);\n    rtn.setMonth(MM);\n    rtn.setDate(dd);\n    rtn.setHours(hh);\n    rtn.setMinutes(mi);\n    rtn.setSeconds(ss);\n    rtn.setMilliseconds(mm);\n    return rtn;\n};\n\nmodule.exports.setTime = function(data) {\n    var D = new Date(data['createdAt']);\n    var hour = D.getHours(),\n        Minutes = D.getMinutes();\n    var since;\n    if (hour >= 12 && hour < 18) since = '';\n    if (hour >= 18 && hour < 20) since = '';\n    if (hour >= 20 && hour < 24) since = '';\n    if (hour >= 0 && hour < 6) since = '';\n    if (hour >= 6 && hour < 9) since = '';\n    if (hour >= 9 && hour < 12) since = '';\n    since = since +' '+ hour + '' + Minutes +'';\n    data['createdAt'] = D.getFullYear() + '-' + (D.getMonth() + 1) + '-' + D.getDate() + ' ' + since;\n};\n\nmodule.exports.setDay = function(data) {\n    var D = new Date(data['createdAt']);\n    data['createdAt'] = D.getFullYear() + '-' + (D.getMonth() + 1) + '-' + D.getDate();\n};\n\n/**  */\nmodule.exports.getDaysInOneMonth = function(year, month){\n    month = parseInt(month, 10);\n    var d= new Date(year, month, 0);\n    return d.getDate();\n};\n\nmodule.exports.setCharset = function (req, res, data) {\n    var utf8Charset = {\n            json: {'content-type': 'application/json; charset=utf-8'},\n            jsonp: {'content-type': 'application/javascript; charset=utf-8'}\n        },\n        type = req.query['callback'] ? 'jsonp' : 'json';\n    res.send(data, utf8Charset[type]);\n};\n\nmodule.exports.filterJson = function (data, map) {\n    var json = {};\n    for (var i = 0; i < map.length; i++) {\n        var key = map[i];\n        if (data[key] !== undefined) json[key] = data[key];\n        else json[key] = '';\n    }\n    return json;\n};\n\n/**  */\nfunction displayProp(obj, limit){\n    var str;\n    const objType = oType(obj);\n    if(objType!=='string'){\n        if(obj instanceof Error){\n            str = printError(obj);\n        }else if(objType === 'object'){\n            str = CircularJSON.stringify(obj);\n        }else{\n            str = String(obj);\n        }\n    }else{\n        str = obj;\n    }\n    if(!str){\n        return str;\n    }\n    if(limit === 0 || isNaN(limit)){\n        limit = 4000;\n    }else if(limit < 0){\n        return str;\n    }\n    return str.substring(0, limit);\n}\nmodule.exports.displayProp = displayProp;\n\n/**\n * \n * @author WangFan\n * */\nvar isEmptyObject = function (obj) {\n    if (!obj) {\n        return true;\n    }\n    for (var i in obj) return false;\n    return true;\n};\nmodule.exports.isEmptyObject = isEmptyObject;\n\n/**\n * \n * @author WangFan\n * */\nvar isNotEmptyObject = function (obj) {\n    return !isEmptyObject(obj);\n};\nmodule.exports.isNotEmptyObject = isNotEmptyObject;\n\n/** set initial capital for English String */\nvar setInitCap = function(str){\n    var type = oType(str);\n    if(type!='string' || !str.length){\n        return str;\n    }\n    let init = str.charAt(0)\n    init = init.toUpperCase()\n    let lower = str.toLowerCase();\n    if(lower.length<2){\n        return init;\n    }\n    lower = lower.substring(1);\n    init = init + lower;\n    return init;\n};\nmodule.exports.setInitCap = setInitCap;\n\nvar setEachInitCap = function(input){\n    var type = oType(input);\n    if(type!='string' || !input.length){\n        return input;\n    }\n    var rtnArr = [], rtn = '', strArr = input.split(' '), i, len, str;\n    for(i=0, len=strArr.length; i<len; i++){\n        str = trim(strArr[i]);\n        if(str==''){\n            continue;\n        }\n        str = setInitCap(str);\n        rtnArr.push(str);\n    }\n    rtn = rtnArr.join(' ');\n    return rtn;\n};\nmodule.exports.setEachInitCap = setEachInitCap;\n\n/**\n * remove spaces for String\n * @author WangFan\n * */\nvar trim = function (str) {\n    if (str == null || str == undefined) {\n        return \"\";\n    }\n    if(oType(str) !== 'string'){\n        return str\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, '');\n};\n\nvar trim2 = function(str){\n    str = trim(str);\n    return str.replace(/\\r?\\n|\\r/g, '');\n};\nmodule.exports.trim2 = trim2;\n\n/**\n * String utility\n * @author WangFan\n * */\nvar isBlank = function (str) {\n    if (str === null || str === undefined || (typeof str === \"string\" && trim(str) === '')) {\n        return true;\n    }\n    return false;\n};\nmodule.exports.isBlank = isBlank;\n\n/**\n * String utility\n * @author WangFan\n * */\nvar isNotBlank = function (str) {\n    return !isBlank(str);\n};\n\n/**\n * remove spaces for String\n * @author WangFan\n * */\nmodule.exports.trimStr = trim;\n\n/** exclude element empty or filtered in an array\n * @param convert: convert format of element in array\n * */\nmodule.exports.trimArray = function(arr, filter, convert){\n    if(!(arr instanceof Array) || arr.length<1){\n        return arr;\n    }\n    var i, len, elem, rtn = [];\n    for(i=0, len=arr.length; i<len; i++){\n        elem = trim(arr[i]);\n        if(elem === ''){\n            continue;\n        }\n        if(filter instanceof Function){\n            if(!filter(elem)){\n                continue;\n            }\n        }\n        if(convert instanceof Function){\n            elem = convert(elem);\n        }\n        rtn.push(elem);\n    }\n    return rtn;\n};\n\nmodule.exports.removeDuplicateInArray = function(passportArr){\n    if(!passportArr || passportArr.length==0){\n        return [];\n    }\n    var passportObj = {};\n    passportArr.forEach(function(pptElem){\n        pptElem = trim(pptElem);\n        passportObj[pptElem] = true;\n    });\n    passportArr = Object.keys(passportObj);\n    return passportArr;\n};\n\n/**\n * String utility\n * @author WangFan\n * */\nmodule.exports.isBlankStr = isBlank;\n\n/**\n * String utility\n * @author WangFan\n * */\nmodule.exports.isNotBlankStr = isNotBlank;\n\n\n/**\n *  from-to \n * @param array \n * */\nvar getMultiSubString = function(array, src, from, to){\n    var start = src.indexOf(from);\n    if(!~start){\n        return;\n    }\n    start += from.length + 1;\n    var end = src.indexOf(to, start);\n    if(!~end){\n        return;\n    }\n    var middle = _L.trim(src.substring(start, end));\n    array.push(middle);\n    end += to.length + 1;\n    var nextSrc = src.substring(end);\n    getMultiSubString(array, nextSrc, from, to);\n};\nmodule.exports.getMultiSubString = getMultiSubString;\n\n/*\n * param str \n * param L \n * return \n */\nfunction cutStr(str, L) {\n    var result = '',\n        strlen = str.length, // \n        // eslint-disable-next-line no-control-regex\n        chrlen = str.replace(/[^\\x00-\\xff]/g, '**').length; // \n\n    if (chrlen <= L) {\n        return str;\n    }\n\n    for (var i = 0, j = 0; i\n        < strlen; i++) {\n        var chr = str.charAt(i);\n        // eslint-disable-next-line no-control-regex\n        if (/[\\x00-\\xff]/.test(chr)) {\n            j++; // ascii0-255\n        } else {\n            j += 2; // ascii0-255\n        }\n        if (j\n            <= L) { // L+result\n            result += chr;\n        } else { // resultL\n            return result;\n        }\n    }\n}\n\nmodule.exports.cutStr = cutStr;\n\nfunction getAlphabetLength(str){\n    if(!str){\n        return 0;\n    }\n    // eslint-disable-next-line no-control-regex\n    var chrlen = str.replace(/[^\\x00-\\xff]/g, '**').length;\n    return chrlen;\n}\nmodule.exports.getAlphabetLength = getAlphabetLength;\n\n\nmodule.exports.stringToInt = function (str, defaultVal) {\n    if(oType(defaultVal)!=='number'){\n        defaultVal = -1;\n    }\n    var limitNum = str;\n    if (oType(limitNum)==='string' && isNotBlank(limitNum)) {\n        limitNum = limitNum.replace(/,/g, '');\n        limitNum = trim(limitNum);\n        limitNum = parseInt(limitNum);\n        if (isNaN(limitNum)) {\n            limitNum = defaultVal;\n        }\n        return limitNum;\n    }else if(oType(limitNum)==='number'){\n        return limitNum;\n    }\n    return defaultVal;\n};\n\nmodule.exports.stringToFloat = function (str, defaultVal) {\n    if(oType(defaultVal)!=='number'){\n        defaultVal = -1;\n    }\n    var limitNum = str;\n    if (oType(limitNum)==='string' && isNotBlank(limitNum)) {\n        limitNum = limitNum.replace(/,/g, '');\n        limitNum = trim(limitNum);\n        limitNum = parseFloat(limitNum);\n        if (isNaN(limitNum)) {\n            limitNum = defaultVal;\n        }\n        return limitNum;\n    }else if(oType(limitNum)==='number'){\n        return limitNum;\n    }\n    return defaultVal;\n};\n\nmodule.exports.replaceAll = function(str, before, after){\n    if(trim(str)==\"\" || !before || !after){\n        return str;\n    }\n    var idx = str.indexOf(before);\n    while(idx>-1){\n        str = str.replace(before, after);\n        idx = str.indexOf(before);\n    }\n    return str;\n};\n\n/**  ch   */\nvar joinEscapeCustomizer = function(arr, ch){\n    const escapeChars = ['^', '$'];\n    if(!arr || arr.length < 1 || oType(ch) !== 'string' || ch.length !== 1){\n        return '';\n    }\n    const arr2 = arr.map(a => {\n        let b = '';\n        if(oType(a) === 'object'){\n            b = JSON.stringify(a);\n        }else if(oType(a) !== 'string'){\n            b = String(a);\n        }else{\n            b = a;\n        }\n        const regex = new RegExp(escape4RegExp(ch), 'g');\n        let c = b.replace(regex, `${ch}${ch}`);\n        escapeChars.forEach(esch => {\n            const regex = new RegExp(escape4RegExp(esch), 'g');\n            c = c.replace(regex, `${ch}${esch}`);\n        })\n        if(!c){\n            c = ' '; // \n        }\n        return c;\n    })\n    const str = arr2.join(ch);\n    return `^${str}$`;\n};\nmodule.exports.joinEscapeCustomizer = joinEscapeCustomizer;\n\n/** \n * joinEscapeCustomizer  \n *  demoDataService.test_escapeTcpData\n * */\nvar splitMultiEscapeCustomizer = function(str, ch){\n    const arr1 = splitEscapeCustomizer(str, ch);\n    const arr2 = _L.flatten(arr1.map(a => splitEscapeCustomizer(a, ch, 2))).filter(a => a);\n    return arr2;\n}\nmodule.exports.splitMultiEscapeCustomizer = splitMultiEscapeCustomizer;\n\n/** splitMultiEscapeCustomizer  */\nvar splitEscapeCustomizer = function(str, ch, stage){\n    const escapeChars = ['^', '$'];\n    if(!str || oType(ch) !== 'string' || ch.length !== 1){\n        return '';\n    }\n    const pushSubArr = function(i, ch){\n        while(this.length < i+1){\n            this.push([]);\n        }\n        this[i].push(ch);\n    }\n    const arr = [];\n    for (let i=0, j=0; i<str.length; i++) {\n        const ich = str.charAt(i);\n        if(stage === 2){\n            if(ich !== ch && escapeChars.indexOf(ich) < 0){\n                pushSubArr.call(arr, j, ich);\n                continue;\n            }\n        }else{\n            if(ich !== ch){ /* && escapeChars.indexOf(ich) < 0 */\n                pushSubArr.call(arr, j, ich);\n                continue;\n            }\n        }\n        if(i === str.length - 1){\n            break;\n        }else{\n            if(stage === 2){\n                const escapeCharIdx = escapeChars.indexOf(ich);\n                if(escapeCharIdx > -1){\n                    if(arr.length > 0){\n                        j++\n                    }\n                    continue;\n                }\n                const i2ch = str.charAt(i + 1);\n                const escapeChar2Idx = escapeChars.indexOf(i2ch);\n                if(escapeChar2Idx > -1){\n                    pushSubArr.call(arr, j, i2ch);\n                    i++;\n                }else{\n                    pushSubArr.call(arr, j, ch);\n                }\n                continue;\n            }else{\n                const i2ch = str.charAt(i + 1);\n                const escapeChar2Idx = escapeChars.indexOf(i2ch);\n                if(i2ch === ch || escapeChar2Idx > -1){\n                    if(i2ch === ch){\n                        pushSubArr.call(arr, j, ch);\n                    }else{\n                        pushSubArr.call(arr, j, `${ch}${i2ch}`);\n                    }\n                    i++;\n                    continue;\n                }else{\n                    j++;\n                }\n            }\n        }\n    }\n    return arr.map(a => a.join(''));\n    \n};\nmodule.exports.splitEscapeCustomizer = splitEscapeCustomizer;\n\nconst hdlEscapeArray = {'*':1, '.':1, '?':1, '+':1, '$':1, '^':1, '[':1, ']':1, '(':1, ')':1, '{':1, '}':1, '|':1, '\\\\':1, '/':1};\nvar escape4RegExp = function(str){\n    if(isBlank(str)){\n        return '';\n    }\n    var _len = str.length, _chr, _preChr, _rtnStrArray = [];\n    _chr = _preChr = null;\n    for(var i=0; i<_len; i++){\n        if(_chr){\n            _preChr = _chr;\n        }\n        _chr = str[i];\n        if(!!hdlEscapeArray[_chr] && trim(_preChr) != '\\\\'){\n            _rtnStrArray.push('\\\\'+_chr);\n        }else{\n            _rtnStrArray.push(_chr);\n        }\n    }\n    return _rtnStrArray.join('');\n};\nmodule.exports.escape4RegExp = escape4RegExp;\n\nmodule.exports.escapeBackSlash = function(str){\n    if(isBlank(str)){\n        return '';\n    }\n    var _len = str.length, _chr, _rtnStrArray = [];\n    for(var i=0; i<_len; i++){\n        _chr = str[i];\n        if(trim(_chr) === '\\\\'){\n            _rtnStrArray.push('\\\\'+_chr);\n        }else{\n            _rtnStrArray.push(_chr);\n        }\n    }\n    return _rtnStrArray.join('');\n};\n\nmodule.exports.extractImgSrc = function(str){\n    if(isBlank(str)){\n        return null;\n    }\n    var regex = /<img[^<]+[(/>)$]/i,\n        _imgStr = str.match(regex);\n//        console.log('imgStr', _imgStr);\n    if(!_imgStr || !_imgStr[0]){\n        return null;\n    }\n    var regex2 = /src=\"[^\"]+[(\")$]/i\n    var _imgStr2 = _imgStr[0].match(regex2), _imgSrc=null;\n//        console.log('imgStr2', _imgStr2);\n    if(!!_imgStr2 && !!_imgStr2[0]){\n        var _len = _imgStr2[0].length;\n        _imgSrc = _imgStr2[0].substring(5, _len-1);\n    }\n//        console.log('imgSrc', _imgSrc);\n    return _imgSrc;\n};\n\nmodule.exports.getRound = function (num, len) {\n    if(!num) {\n        return 0;\n    }else if(oType(num) !== 'number'){\n        num = parseFloat(num);\n        if(isNaN(num)){\n            return 0;\n        }\n    }\n    if(!len && len !== 0){\n        len = 2;\n    }\n    return Math.round(num * Math.pow(10, len)) / Math.pow(10, len);\n};\n\n/* str1 ends with str2 */\nvar startsWith = function(str1, startStr){\n    if(oType(str1) !== 'string' || oType(startStr) !== 'string'){\n        return false;\n    }\n    if(str1.length < startStr.length){\n        return false;\n    }\n    return str1.slice(0, startStr.length) === startStr;\n};\nmodule.exports.startsWith = startsWith;\n\n/* str1 ends with str2 */\nvar endsWith = function(str1, endStr){\n    if(oType(str1) !== 'string' || oType(endStr) !== 'string'){\n        return false;\n    }\n    endStr = escape4RegExp(endStr);\n    var regex = eval('/('+endStr+')$/');\n    return regex.test(str1);\n};\nmodule.exports.endsWith = endsWith;\n\n/** \n * \n * @param startIdx optional \n * */\nmodule.exports.indexOfChn = function(str, startIdx){\n    const str2 = oType(startIdx) === 'number' && startIdx > 0 ? str.slice(startIdx) : str;\n    const matchResult = getDeepVal(str2.match(/[\\u4e00-\\u9fa5]/), [0]);\n    const nextChnCharIdx = matchResult ? str.indexOf(matchResult, startIdx) : -1;\n    return nextChnCharIdx;\n}\n\n/**  */\nmodule.exports.regexIndexOf = function(str, regex, startpos) {\n    var indexOf = str.substring(startpos || 0).search(regex);\n    return (indexOf >= 0) ? (indexOf + (startpos || 0)) : indexOf;\n};\n\n/**  */\nmodule.exports.regexLastIndexOf = function(str, regex, startpos) {\n    regex = (regex.global) ? regex : new RegExp(regex.source, \"g\" + (regex.ignoreCase ? \"i\" : \"\") + (regex.multiLine ? \"m\" : \"\"));\n    if(typeof (startpos) === \"undefined\") {\n        startpos = str.length;\n    } else if(startpos < 0) {\n        startpos = 0;\n    }\n    var stringToWorkWith = str.substring(0, startpos + 1);\n    var lastIndexOf = -1;\n    var nextStop = 0;\n    var result;\n    while((result = regex.exec(stringToWorkWith)) != null) {\n        lastIndexOf = result.index;\n        regex.lastIndex = ++nextStop;\n    }\n    return lastIndexOf;\n};\n\n/* var deepClone = function(obj){\n    var str, newobj = obj.constructor === Array ? [] : {};\n    if(['object', 'function'].indexOf(oType(obj)) < 0){\n        return obj;\n    } else{\n        str = JSON.stringify(obj); //\n        newobj = JSON.parse(str); //\n    }\n    return newobj;\n};\nmodule.exports.deepClone = deepClone; */\n\n/**  */\nvar deepClone = function fnDeepClone(obj, options={}){\n    if(['object', 'function'].indexOf(oType(obj)) < 0){\n        return obj;\n    }\n    const oidHandler = options.oidHandler;\n    let result = typeof obj.splice === 'function' ? [] : {}, key;\n    if (obj && typeof obj === 'object'){\n        for (key in obj ){\n            if(obj[key] && obj[key] instanceof Date){\n                if(options.dateHandler && options.dateHandler instanceof Function){\n                    result[key] = options.dateHandler(obj[key])\n                }else{\n                    result[key] = new Date(obj[key])\n                }\n            }else if(obj[key] && obj[key] instanceof Buffer){\n                if(options.bufferHandler && options.bufferHandler instanceof Function){\n                    result[key] = options.bufferHandler(obj[key])\n                }else{\n                    result[key] = obj[key]\n                }\n            }else if (obj[key] && typeof obj[key] === 'object'){\n                result[key] = fnDeepClone(obj[key], options);//objectdeepClone\n            }else{\n                if(key === '_id'){\n                    if(oidHandler && oType(oidHandler) === 'function'){\n                        result[key] = oidHandler(obj[key]);\n                        continue;\n                    }\n                }\n                result[key] = obj[key];//object//\n            }\n        }\n        return result;\n    }\n    return obj;\n}\nmodule.exports.deepClone = deepClone;\n\n/** json */\nfunction parseJsonWithNumber2String(str){\n    if(!str){\n        // str = \"{\\\"buyer_nick\\\":\\\"pk\\\",\\\"biz_type\\\":2,\\\"gmt_created\\\":\\\"2019-04-27 15:12:56\\\",\\\"seller_id\\\":3471466586,\\\"gmt_modified\\\":\\\"2019-04-29 23:13:08\\\",\\\"item_infos\\\":\\\"124770001:565150005922::0190010023\\\",\\\"order_id\\\":424892353752564070,\\\"seller_nick\\\":\\\"\\\",\\\"order_status\\\":4}\";\n        return null;\n    }\n    var rtn = str;\n    var regexArr = [new RegExp(':\\\\d{17,}(,|\\\\})', 'g'), new RegExp(':\\\\d+\\\\.\\\\d+(,|\\\\})', 'g')];\n    for(var j=0; j<regexArr.length; j++){\n        var regex = regexArr[j];\n        var matches = str.match(regex);\n        var matchArr = matches ? Array.prototype.slice.call(matches) : [];\n        for(var i=0; i<matchArr.length; i++){\n            var sourceStr = _L.trim(matchArr[i]);\n            var targetStr = sourceStr.replace(':', ':\"');\n            const tgtStrlen = targetStr.length;\n            const lastChar = targetStr.slice(-1);\n            const last2Char = targetStr.slice(-2, -1);\n            if(tgtStrlen > 2){\n                if(!/\\\\d/.test(lastChar) && last2Char !== '\"'){\n                    targetStr = targetStr.slice(0, -1) + '\"' + lastChar;\n                    // console.log('sourceStr:', sourceStr, 'targetStr:', targetStr, 'j:', j)\n                    rtn = rtn.replace(sourceStr, targetStr);\n                }\n            }\n        }\n    }\n    // console.log(rtn)\n    var obj = null;\n    try{\n        obj = JSON.parse(rtn);\n    }catch(e){\n        try{\n            obj = JSON.parse(str);\n        }catch(e1){\n            console.error('hdlUtil #1490 ERROR', e1)\n        }\n    }\n    // console.log('parseJsonWithNumber2String ->', obj);\n    return obj;\n}\nmodule.exports.parseJsonWithNumber2String = parseJsonWithNumber2String;\n\n/** () */\nvar getEngCharLength = function(str){\n    if(!str){\n        return 0;\n    }\n    var arr = str.split(\"\");\n    var chineseStrArr = [];\n    var notChineseStrArr = [];\n    arr.forEach(function(singleStr){\n        if(hdlValidateUtil.isChnChar(singleStr)){\n            chineseStrArr.push(singleStr);\n        }else{\n            notChineseStrArr.push(singleStr);\n        }\n    });\n    return Math.ceil(chineseStrArr.length*2) + notChineseStrArr.length;\n\n};\nmodule.exports.getEngCharLength = getEngCharLength;\n\n/** () */\nvar getChnCharLength = function(str){\n    if(!str){\n        return 0;\n    }\n    var arr = str.split(\"\");\n    var chineseStrArr = [];\n    var notChineseStrArr = [];\n    arr.forEach(function(singleStr){\n        if(hdlValidateUtil.isChnChar(singleStr)){\n            chineseStrArr.push(singleStr);\n        }else{\n            notChineseStrArr.push(singleStr);\n        }\n    });\n    return Math.ceil(notChineseStrArr.length/2) + chineseStrArr.length;\n\n};\nmodule.exports.getChnCharLength = getChnCharLength;\n\nmodule.exports.stripHtmlTags = function(str){\n    if(oType(str) !== 'string'){\n        return String(str);\n    }\n    return str.replace(/<\\/?[^>]+(>|$)/g, \"\");\n}\n\nmodule.exports.getHashCode = function(str) {\n    var hash = 0, i, chr;\n    if (str.length === 0) return hash;\n    for (i = 0; i < str.length; i++) {\n        chr   = str.charCodeAt(i);\n        hash  = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n};\n\n/** \n *  ${var} \n * varObj  ${var} \n */\nmodule.exports.splitDollarVarTemplate = (template, varObj={}) => {\n    const shrinks = [];\n    for(let i=0, head = -1, tail = -1; i<template.length; i++){\n        if(head<0 && tail<0 && (template.length - i > 2) && template.charAt(i) === '$' && template.charAt(i+1) === '{'){\n            head = i;\n        }else if(head > -1 && tail < 0 && template.charAt(i) === '}'){\n            tail = i;\n            shrinks.push(head, tail);\n            head = tail = -1;\n        }\n    }\n    const tempArr = [];\n    for(let i=0, j=0, subArr = []; i<template.length; i++){\n        if(j%2 === 0 && i !== shrinks[j]){\n            subArr.push(template[i]);\n        }else if(j%2 === 0 && i === shrinks[j]){\n            if(j+1 < shrinks.length){\n                const varIdx1 = shrinks[j] + 2;\n                const varIdx2 = shrinks[j + 1];\n                if(varIdx1 < varIdx2){\n                    const varKey = template.slice(varIdx1, varIdx2);\n                    const valVal = _L.trim(varObj[varKey]);\n                    if(valVal){\n                        subArr.push(valVal)\n                    }\n                    // console.log('#1701', varKey, '->', valVal);\n                }\n            }\n            tempArr.push(subArr.join(''));\n            j++;\n            subArr = [];\n        }else if(j%2 !== 0 && i === shrinks[j]){\n            j++;\n        }\n    }\n    if(shrinks.length > 0 && template.length - shrinks.slice(-1)[0] > 1){\n        tempArr.push(template.substring(shrinks.slice(-1)[0] + 1));\n    }\n    if(tempArr.length < 1){\n        return [template];\n    }\n    return tempArr.filter( (s) => {return s});\n};\n\nconst iterateSplitHtmlTagTemplate = (str, tag, results) => {\n    const arr = splitHtmlTagTemplate(str, tag);\n    for(let i=0; i<arr.length; i++){\n        if(arr[i].indexOf('</' + tag + '>') > -1){\n            iterateSplitHtmlTagTemplate(arr[i], tag, results)\n        }else{\n            results.push(arr[i]);\n        }\n    }\n}\nmodule.exports.iterateSplitHtmlTagTemplate = iterateSplitHtmlTagTemplate;\n\n/**  <p> ... </p>  */\nconst splitHtmlTagTemplate = (template, tag) => {\n    const startTag = '<' + tag + '>';\n    const startTag2 = '<' + tag + ' ';\n    const endTag = '</' + tag + '>';\n    const shrinks = [];\n    for(let i=0, head = -1, tail = -1, nestedTag = 0; i<template.length; i++){\n        if((template.length - i > 2) && template.slice(i, i + startTag.length) === startTag){\n            if(head<0 && tail<0){\n                head = i + startTag.length;\n            }else if(head > 0 && tail < 0){\n                nestedTag++;\n            }\n            i+= startTag.length - 1;\n        }else if((template.length - i > 2) && template.slice(i, i + startTag2.length) === startTag2){\n            const firstLeftBracket = template.indexOf('>', i + startTag2.length);\n            if(head<0 && tail<0){\n                head = firstLeftBracket + 1;\n                // head = i + startTag2.length;\n            }else if(head > 0 && tail < 0){\n                nestedTag++;\n            }\n            i+= startTag2.length - 1;\n        }else if(head > -1 && tail < 0 && template.slice(i, i + endTag.length) === endTag){\n            if(nestedTag > 0){\n                nestedTag--;\n            }else{\n                nestedTag = 0;\n                tail = i;\n                // shrinks.push(head, tail);\n                shrinks.push(template.slice(head, tail));\n                head = tail = -1;\n            }\n            i+= endTag.length - 1;\n        }\n    }\n    return shrinks;\n};\nmodule.exports.splitHtmlTagTemplate = splitHtmlTagTemplate;\n\n/** cookierandom_refund */\nfunction parseCookies(cookie) {\n    return cookie.split(';').reduce(\n        function(prev, curr) {\n            var m = / *([^=]+)=(.*)/.exec(curr);\n            if(!m){\n                return prev;\n            }\n            var key = m[1];\n            var value = decodeURIComponent(m[2]);\n            prev[key] = value;\n            return prev;\n        },\n        { }\n    );\n}\nmodule.exports.parseCookies = parseCookies;\n\nfunction setDeepVal(data, keyArr, newValue){\n    if(!keyArr){\n        keyArr = [];\n    }\n    if(oType(keyArr) === 'string'){\n        keyArr = keyArr.split('.');\n    }\n    if(!(keyArr instanceof Array) || keyArr.length < 1){\n        console.error('setDeepVal ERROR - keyArr is empty:', data, keyArr, newValue)\n    }\n    const keyArr2 = keyArr.length > 1 ? keyArr.slice(0, keyArr.length - 1) : [];\n    const lastKey = keyArr.length > 1 ? keyArr.slice(-1)[0] : keyArr[0];\n    if(['undefined'].indexOf(oType(lastKey)) > -1){\n        console.error('setDeepVal ERROR - lastKey is undefined:', {keyArr, newValue, data})\n    }\n    const lastSecondObj = keyArr2.length > 0 ? getDeepVal(data, keyArr2) : data;\n    if(!lastSecondObj || oType(lastSecondObj) !== 'object'){\n        console.error('setDeepVal ERROR - lastSecondObj is missing:', data, keyArr, newValue)\n        return;\n    }\n    lastSecondObj[lastKey] = newValue;\n}\nmodule.exports.setDeepVal = setDeepVal;\n\n/** @param defaultVal  keyArr  */\nfunction getDeepVal(data, keyArr, defaultVal){\n    const keyArrCopy = deepClone(keyArr);\n    const result = [];\n    getValByIterativeKey(data, keyArr, result);\n    const rtn = result[0];\n    if(!rtn && defaultVal){\n        setDeepVal(data, keyArrCopy, defaultVal);\n        return defaultVal;\n    }else{\n        return rtn;\n    }\n}\nmodule.exports.getDeepVal = getDeepVal;\n\nfunction getValByIterativeKey(data, keyArr, result){\n    if(!data){\n        data = {};\n    }\n    if(!keyArr){\n        keyArr = [];\n    }\n    if(oType(keyArr) === 'string'){\n        keyArr = keyArr.split('.');\n    }\n    const key = keyArr.shift();\n    data = data[key];\n    if(['undefined', 'null'].indexOf(oType(data)) > -1){\n        return;\n    }\n    if(keyArr.length > 0){\n        return getValByIterativeKey(data, keyArr, result);\n    }else{\n        return result.push(data);\n    }\n}\nmodule.exports.getValByIterativeKey = getValByIterativeKey;\n\n\nconst regexIndexOf = function(regex, startpos) {\n    var indexOf = this.substring(startpos || 0).search(regex);\n    return (indexOf >= 0) ? (indexOf + (startpos || 0)) : indexOf;\n};\nmodule.exports.regexIndexOf = regexIndexOf;\n\nconst regexLastIndexOf = function(regex, startpos) {\n    regex = (regex.global) ? regex : new RegExp(regex.source, \"g\" + (regex.ignoreCase ? \"i\" : \"\") + (regex.multiLine ? \"m\" : \"\"));\n    if(typeof (startpos) === \"undefined\") {\n        startpos = this.length;\n    } else if(startpos < 0) {\n        startpos = 0;\n    }\n    var stringToWorkWith = this.substring(0, startpos + 1);\n    var lastIndexOf = -1;\n    var nextStop = 0;\n    let result= null;\n    while((result = regex.exec(stringToWorkWith)) != null) {\n        lastIndexOf = result.index;\n        regex.lastIndex = ++nextStop;\n    }\n    return lastIndexOf;\n};\nmodule.exports.regexLastIndexOf = regexLastIndexOf;\n\n/**  URL  GET  */\nconst getUrlParams = search => {\n    const httpHeadRegExp = new RegExp('^http[s]?://');\n    if(httpHeadRegExp.test(search)){\n        search = search.slice(search.indexOf('?'));\n    }\n    const RTN = {};\n    const tmp = search.slice(1).split('&').map(function(a){\n        const arr = a.split('=');\n        if(arr.length !== 2){\n            return null;\n        }\n        arr[1] = decodeURIComponent(arr[1]);\n        return arr;\n    }).filter(function(a){return a});\n    tmp.forEach(function(arr){\n        RTN[arr[0]] = arr[1];\n    });\n    return RTN;\n};\nmodule.exports.getUrlParams = getUrlParams;\n\n/*  options: {recurInterval, maxRetryTimes, overtimeHandler} */\nconst stepDownIfConditionSatisfiedPromise = (conditionHandler, options) => {\n    if(!options){\n        options = {};\n    }\n    const recurInterval = options.recurInterval || 500;\n    if(!conditionHandler || !(conditionHandler instanceof Function) ){\n        return Promise.resolve(null);\n    }\n    const recurHandler = function(rsv, rej, times){\n        if(!times){\n            times = 0;\n        }\n        times++;\n        /*if(config.isDevelop){\n            console.log(new Date(), 'stepDownIfConditionSatisfiedPromise - #20 times = ' + times);\n        }*/\n        if(conditionHandler()){\n            return rsv(null);\n        }\n        if(options.maxRetryTimes && times > options.maxRetryTimes){\n            // console.log(new Date(), 'stepDownIfConditionSatisfiedPromise #24');\n            if(options.overtimeHandler){\n                options.overtimeHandler.call(null, rsv, rej, times);\n            }else{\n                rej({code: 110, msg: 'stepDown retry overtime: ' + options.maxRetryTimes});\n            }\n        }else {\n            return setTimeout(function () {\n                /* if(config.isDevelop){\n                    console.log(new Date(), 'stepDownIfConditionSatisfiedPromise - #1673 times = ' + times);\n                } */\n                recurHandler(rsv, rej, times);\n            }, recurInterval);\n        }\n    }\n    return Q.promise(function(rsv, rej){\n        recurHandler(rsv, rej);\n    })\n}\nmodule.exports.stepDownIfConditionSatisfiedPromise = stepDownIfConditionSatisfiedPromise;\n\nconst isEndWith = (str = '', endStr = '') => {\n    const idx = str.length - endStr.length;\n    return (idx >= 0 && str.lastIndexOf(endStr) === idx);\n};\nmodule.exports.isEndWith = isEndWith;\n\nconst getPlaceOfBirthEng = (birthPlace) => {\n    let placeOfBirthEng;\n    const placeOfBirthEngObj = {\n        '': 'BEIJING', '': 'TIANJIN', '': 'SHANGHAI', '': 'CHONGQING','': 'HEBEI', '': 'SHANXI', '': 'LIAONING',\n        '': 'JILIN', '': 'HEILONGJIANG', '': 'JIANGSU', '': 'ZHEJIANG', '': 'ANHUI', '': 'FUJIAN', '': 'JIANGXI',\n        '': 'SHANDONG', '': 'HENAN', '': 'HUBEI', '': 'HUNAN', '': 'GUANGDONG', '': 'HAINAN', '': 'SICHUAN',\n        '': 'GUIZHOU', '': 'YUNNAN', '': 'SHAANXI', '': 'GANSU', '': 'QINGHAI', '': 'TAIWAN', '': 'NEI MONGOL',\n        '': 'GUANGXI', '': 'NINGXIA', '': 'XIZANG', '': 'XINJIANG', '': 'XIANGGANG', '': 'AOMEN', '': 'EGY', '': 'CAIRO'\n    };\n\n    const cityArr = Object.keys(placeOfBirthEngObj);\n    for(var i = 0; i< cityArr.length; i++){\n        if(cityArr[i].indexOf(birthPlace) > -1){\n            placeOfBirthEng = placeOfBirthEngObj[cityArr[i]];\n            break;\n        }\n    }\n    return _L.trim(placeOfBirthEng);\n};\nmodule.exports.getPlaceOfBirthEng = getPlaceOfBirthEng;\n\nconst getPlaceOfIssueEng = (issuePlace) => {\n    let placeOfIssueEng;\n    const placeOfIssueEngObj = {\n        '': 'BEIJING', '': 'TIANJIN', '': 'SHANGHAI', '': 'CHONGQING','': 'HEBEI', '': 'SHANXI', '': 'LIAONING',\n        '': 'JILIN', '': 'HEILONGJIANG', '': 'JIANGSU', '': 'ZHEJIANG', '': 'ANHUI', '': 'FUJIAN', '': 'JIANGXI',\n        '': 'SHANDONG', '': 'HENAN', '': 'HUBEI', '': 'HUNAN', '': 'GUANGDONG', '': 'HAINAN', '': 'SICHUAN',\n        '': 'GUIZHOU', '': 'YUNNAN', '': 'SHAANXI', '': 'GANSU', '': 'QINGHAI', '': 'TAIWAN', '': 'NEI MONGOL',\n        '': 'GUANGXI', '': 'NINGXIA', '': 'XIZANG', '': 'XINJIANG', '': 'XIANGGANG', '': 'AOMEN', '': 'EGY', '': 'CAIRO'\n    };\n    const cityArr = Object.keys(placeOfIssueEngObj);\n    for(var j = 0; j< cityArr.length; j++){\n        if(cityArr[j].indexOf(issuePlace) > -1){\n            placeOfIssueEng = placeOfIssueEngObj[cityArr[j]];\n            break;\n        }\n    }\n    return _L.trim(placeOfIssueEng);\n};\nmodule.exports.getPlaceOfIssueEng = getPlaceOfIssueEng;\n\nconst getAirportCHN = (airport) => {\n    let airportCHN = '';\n    if(airport.indexOf('BKK') > -1){\n        airportCHN = ''\n    }else if(airport.indexOf('DMK - ') > -1){\n        airportCHN = ''\n    }else if(airport.indexOf('HKT - ') > -1){\n        airportCHN = ''\n    }else if(airport.indexOf('CNX - ') > -1){\n        airportCHN = ''\n    }else if(airport.indexOf('KBV - ') > -1){\n        airportCHN = ''\n    }\n    return airportCHN;\n};\nmodule.exports.getAirportCHN = getAirportCHN;\n\n/**  */\nconst hasKeyWords = (str, arr) => {\n    if(!str){\n        return '';\n    }\n    if(!(arr instanceof Array)){\n        return '';\n    }\n    arr = arr.filter(a => oType(a) === 'string');\n    if(arr.length < 1){\n        return '';\n    }\n    for(let i=0; i<arr.length; i++){\n        const keyWord = arr[i];\n        if(str.indexOf(keyWord) > -1){\n            return keyWord;\n        }\n    }\n    return '';\n};\nmodule.exports.hasKeyWords = hasKeyWords;\n\n\nmodule.exports.encodeUnicode = str => {\n    const res = [];\n    for (let i = 0; i < str.length; i++) {\n        res[i] = ( \"00\" + str.charCodeAt(i).toString(16) ).slice(-4);\n    }\n    return \"\\\\u\" + res.join(\"\\\\u\");\n}\n\nmodule.exports.decodeUnicode = str => {\n    str = str.replace(/\\\\/g, \"%\");\n    return unescape(str);\n }\n\n /**  */\n module.exports.subtractStrings = function(a, b){\n    if(a.length < b.length){\n        const tmp = a;\n        a = b;\n        b = tmp;\n    }\n    const arrA = a.split('')\n    const arrB = b.split('')\n    const cursorArr = [];\n    let cursor = -1;\n    let offset = 0;\n    let offset2 = 0;\n    for(let i=0; i<arrA.length; i++){\n        const strA = arrA[i];\n        const strB = arrB[i - offset]\n        if(strA !== strB){\n            if(cursor < 0){\n                cursor = i;\n            }else{\n                offset++;\n                offset2++;\n            }\n        }else if(cursor > -1){\n            const diff = a.slice(cursor, cursor + offset2);\n            cursorArr.push({cursor, offset, diff});\n            cursor = -1;\n            offset2 = 0;\n        }\n    }\n    return cursorArr;\n}"],"file":"hdlUtil.js"}